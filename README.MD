# ComfyUI Prompt Composer

一个用于组装提示词的 ComfyUI 自定义节点插件。可以通过选择不同的选项来生成正面提示词和负面提示词。


## 功能特点

- 提供24个可配置的下拉选择控件
- 支持从配置文件读取选项内容
- 支持随机选择功能
- 智能提示词组装逻辑
- 支持套装模式快速切换完整提示词
- 支持服装颜色和材质的智能组合

## 安装方法

1. 将本项目文件夹复制到 ComfyUI 的 custom_nodes 目录下
2. 重启 ComfyUI

## 配置文件

### prompt_config.txt

用于配置每个选择控件的默认值:
- 数字表示默认选中该组中的第N个选项(从0开始计数)
- -1 表示随机模式

### prompt_group.txt

存储所有选项的具体内容,JSON格式:
- 每个key对应一个选项组
- 值为字符串数组,存储该组的所有可选项

## 使用说明

1. 将节点拖入画布
2. 通过下拉框选择需要的选项
3. 运行工作流程会自动组装生成:
   - positive_prompt: 正面提示词字符串
   - negative_prompt: 负面提示词字符串

### 提示词组装规则

1. 套装规则：
   - 当"套装"选择大于0的值时,会直接使用套装对应的完整提示词
   - 当"套装"为-1或0时,会将其他选项按顺序组合成提示词

2. 服装颜色和材质规则：
   - 当选择了"颜色"和"材质"时,会自动与服装相关选项组合
   - 组合规则:
     * 当"服装"或"上装"的选值大于1时(非空且非裸露),会自动加入颜色和材质前缀
     * 颜色和材质会按顺序添加到服装词前,如: "white_silk_dress"

3. 负面提示词：
   - "负面提示词"单独组成 negative_prompt

## 注意事项

- 请确保配置文件格式正确
- 运行时如选择随机模式,每次都会重新随机
- 建议定期备份配置文件
- 颜色和材质的组合仅对服装类选项生效

## License

MIT License